<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Calcul Plaque Mobile</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 14px;
      margin: 0 auto;
      background-color: #ffffff;
      max-width: 480px;
      font-size: 16px;
    }
    header {
      text-align: center;
      margin-bottom: 20px;
    }
    header img {
      max-width: 100px;
      height: auto;
    }
    label {
      font-weight: bold;
      display: block;
      margin-bottom: 4px;
    }
    input[type="number"], select {
      width: 100%;
      padding: 10px;
      font-size: 16px;
      margin-bottom: 12px;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-sizing: border-box;
    }
    .row-3, .row-2 {
      display: flex;
      gap: 10px;
      margin-bottom: 12px;
    }
    .row-3 > div, .row-2 > div {
      flex: 1;
    }
    button {
      width: 100%;
      padding: 14px;
      font-size: 18px;
      background-color: #0077cc;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 10px;
    }
    button:hover {
      background-color: #005fa3;
    }
    .result {
      margin-top: 18px;
      background-color: #f2f2f2;
      padding: 15px;
      border-radius: 6px;
      font-size: 15px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.1);
      line-height: 1.4;
    }
  </style>
</head>
<body>
  <header>
    <img src="logo box-in emballage.jpg" alt="Logo Box-In">
    <h2>Calcul Plaque Carton</h2>
  </header>

  <div class="row-3">
    <div>
      <label for="length">Longueur (cm)</label>
      <input type="number" id="length" min="0" inputmode="decimal">
    </div>
    <div>
      <label for="width">Largeur (cm)</label>
      <input type="number" id="width" min="0" inputmode="decimal">
    </div>
    <div>
      <label for="height">Hauteur (cm)</label>
      <input type="number" id="height" min="0" inputmode="decimal">
    </div>
  </div>

  <div class="row-2">
    <div>
      <label for="flap">Rabat (auto)</label>
      <input type="number" id="flap" min="0" inputmode="decimal">
    </div>
    <div>
      <label for="glueMargin">Marge collage (auto)</label>
      <input type="number" id="glueMargin" min="0" inputmode="decimal">
    </div>
  </div>

  <label for="quantity">Quantité :</label>
  <input type="number" id="quantity" min="1" inputmode="numeric">

  <label for="cartonType">Type de carton :</label>
  <select id="cartonType">
    <option value="tle-tle">Simple cannelure - TLE/TLE (écru)</option>
    <option value="tlb-tle">Simple cannelure - TLB/TLE (blanc)</option>
    <option value="kle-tle">Simple cannelure - KLE/TLE (kraft)</option>
    <option value="dd-tle-tle">Double cannelure - DD-TLE/TLE (écru)</option>
    <option value="dd-tlb-tle">Double cannelure - DD-TLB/TLE (blanc)</option>
    <option value="dd-kle-tle">Double cannelure - DD-KLE/TLE (kraft)</option>
    <option value="dd-klb-tle">Double cannelure - DD-KLB/TLE (kraft-blanc)</option>
  </select>

  <button onclick="calculerPlaque()">Calculer</button>

  <div class="result" id="result"></div>

  <script>
    // Auto-remplissage du rabat selon largeur
    document.getElementById('width').addEventListener('input', () => {
      const l = parseFloat(document.getElementById('width').value);
      if (!isNaN(l) && l > 0) {
        const flap = Math.max(3, l / 2);
        document.getElementById('flap').value = flap.toFixed(2);
      }
    });

    // Marge collage auto à 3 cm
    document.getElementById('glueMargin').addEventListener('focus', () => {
      const g = document.getElementById('glueMargin');
      if (g.value === "") g.value = "3.00";
    });

    function calculerPlaque() {
      const L = parseFloat(document.getElementById('length').value);
      const l = parseFloat(document.getElementById('width').value);
      const H = parseFloat(document.getElementById('height').value);
      const flapInput = parseFloat(document.getElementById('flap').value);
      const glueMarginInput = parseFloat(document.getElementById('glueMargin').value);
      const qty = parseInt(document.getElementById('quantity').value);
      const type = document.getElementById('cartonType').value;

      if (isNaN(L) || isNaN(l) || isNaN(H) || isNaN(qty)) {
        alert("Remplis toutes les dimensions et la quantité.");
        return;
      }

      const flap = isNaN(flapInput) ? Math.max(3, l / 2) : flapInput;
      const glueMargin = isNaN(glueMarginInput) ? 3 : glueMarginInput;

      const largeurPlaque = 2 * (L + l) + glueMargin;
      const hauteurPlaque = H + 2 * flap;
      const surface = (largeurPlaque * hauteurPlaque) / 10000;

      let prix = 0;
      let desc = "";

      switch(type) {
        case "tle-tle":
          desc = "Simple cannelure - TLE/TLE (écru)";
          if (qty >= 10000) prix = 54.00;
          else if (qty >= 5000) prix = 58.38;
          else if (qty >= 1000) prix = 61.30;
          else prix = 66.00;
          break;
        case "tlb-tle":
          desc = "Simple cannelure - TLB/TLE (blanc)";
          if (qty >= 10000) prix = 55.80;
          else if (qty >= 5000) prix = 60.47;
          else if (qty >= 1000) prix = 63.47;
          else prix = 68.36;
          break;
        case "kle-tle":
          desc = "Simple cannelure - KLE/TLE (kraft)";
          if (qty >= 10000) prix = 60.36;
          else if (qty >= 5000) prix = 65.47;
          else if (qty >= 1000) prix = 68.66;
          else prix = 74.00;
          break;
        case "dd-tle-tle":
          desc = "Double cannelure - DD-TLE/TLE (écru)";
          if (qty >= 10000) prix = 92.40;
          else if (qty >= 5000) prix = 100.00;
          else if (qty >= 1000) prix = 105.10;
          else prix = 113.00;
          break;
        case "dd-tlb-tle":
          desc = "Double cannelure - DD-TLB/TLE (blanc)";
          if (qty >= 10000) prix = 96.00;
          else if (qty >= 5000) prix = 104.00;
          else if (qty >= 1000) prix = 109.20;
          else prix = 117.00;
          break;
        case "dd-kle-tle":
          desc = "Double cannelure - DD-KLE/TLE (kraft)";
          if (qty >= 10000) prix = 102.00;
          else if (qty >= 5000) prix = 110.50;
          else if (qty >= 1000) prix = 116.00;
          else prix = 125.00;
          break;
        case "dd-klb-tle":
          desc = "Double cannelure - DD-KLB/TLE (kraft-blanc)";
          if (qty >= 10000) prix = 108.00;
          else if (qty >= 5000) prix = 117.00;
          else if (qty >= 1000) prix = 122.85;
          else prix = 132.50;
          break;
      }

      const prix_total = surface * prix;

      document.getElementById('result').innerHTML = `
        <strong>Type :</strong> ${desc}<br>
        <strong>Largeur plaque :</strong> ${largeurPlaque.toFixed(2)} cm<br>
        <strong>Hauteur plaque :</strong> ${hauteurPlaque.toFixed(2)} cm<br>
        <strong>Rabat :</strong> ${flap.toFixed(2)} cm<br>
        <strong>Marge collage :</strong> ${glueMargin.toFixed(2)} cm<br>
        <strong>Surface :</strong> ${surface.toFixed(4)} m²<br>
        <strong>Prix m² :</strong> ${prix.toFixed(2)} DA<br>
        <strong>Prix unité :</strong> ${prix_total.toFixed(2)} DA
      `;
    }
  </script>
</body>
</html>
